
# دليل إعداد وتشغيل مشروع "دوامي"

هذا الدليل يشرح الخطوات اللازمة لتجهيز بيئة التشغيل لمشروع "دوامي" وتشغيله على جهازك كخادم ويب محلي.

## المتطلبات المسبقة

قبل البدء، تأكد من أن لديك البرامج التالية مثبتة على جهازك:

*   **Node.js:** إصدار 18.x أو أحدث. يمكنك تنزيله من [nodejs.org](https://nodejs.org/).
    *   يتضمن Node.js مدير الحزم `npm` الذي سنستخدمه.
*   **محرر نصوص أو بيئة تطوير متكاملة (IDE):** مثل Visual Studio Code (مستحسن).

## خطوات التثبيت

1.  **استنساخ المستودع (Clone the Repository):**
    إذا كان المشروع موجوداً في مستودع Git (مثل GitHub)، قم باستنساخه إلى جهازك باستخدام الأمر:
    ```bash
    git clone <repository_url>
    cd dawami-project-directory
    ```
    إذا كان لديك ملفات المشروع مباشرة، انتقل إلى مجلد المشروع الرئيسي.

2.  **تثبيت التبعيات (Install Dependencies):**
    لدينا سكربت مخصص لتسهيل هذه العملية. قم بتشغيل الملف `install_deps.bat` الموجود في جذر المشروع.
    ```bash
    ./install_deps.bat
    ```
    أو يمكنك تشغيل الأمر يدوياً في الطرفية (Terminal/Command Prompt) داخل مجلد المشروع:
    ```bash
    npm install
    ```
    سيقوم هذا الأمر بتنزيل وتثبيت جميع المكتبات والتبعيات المذكورة في ملف `package.json`.

3.  **إعداد الملفات البيئية (`.env.local`):**
    بعض الإعدادات الحساسة أو الخاصة بالبيئة يتم تخزينها في ملف `.env.local`. هذا الملف لا يتم عادةً رفعه إلى مستودعات Git.

    *   **الأهمية:** يحتوي هذا الملف على متغيرات مثل مفاتيح API السرية أو إعدادات قاعدة البيانات التي لا يجب أن تكون عامة.
    *   **إنشاء الملف:** قم بإنشاء ملف جديد في جذر المشروع باسم `.env.local`.
    *   **المتغيرات المطلوبة حالياً:**
        *   `FINGERPRINT_WEBHOOK_SECRET`: مفتاح سري تستخدمه نقطة استقبال بيانات البصمة للتحقق من أن الطلبات قادمة من مصدر موثوق. يجب أن يكون هذا المفتاح سلسلة نصية طويلة وعشوائية وآمنة.
          ```env
          FINGERPRINT_WEBHOOK_SECRET="YOUR_VERY_STRONG_AND_RANDOM_SECRET_KEY_HERE"
          ```
        *   قد تحتاج إلى متغيرات أخرى في المستقبل (مثل مفاتيح Google AI لـ Genkit إذا تجاوزت الحصص المجانية أو استخدمت نماذج مدفوعة).

## تشغيل التطبيق (نسخة الويب)

لدينا سكربت مخصص لبناء وتشغيل التطبيق في وضع الإنتاج.

1.  **استخدام `start_web.bat`:**
    قم بتشغيل الملف `start_web.bat` الموجود في جذر المشروع.
    ```bash
    ./start_web.bat
    ```
    أو يمكنك تشغيل الأوامر يدوياً:
    ```bash
    npm run build
    npm start
    ```
    *   `npm run build`: يقوم ببناء تطبيق Next.js لبيئة الإنتاج.
    *   `npm start`: يقوم بتشغيل الخادم المبني.

2.  **الوصول إلى التطبيق:**
    بعد تشغيل السكربت بنجاح، سيقوم التطبيق بالعمل، وسيحاول السكربت فتح المتصفح تلقائياً. يمكنك الوصول إلى "دوامي" عبر:
    *   **من نفس الكمبيوتر (محلياً):** `http://localhost:3000`
    *   **من أجهزة أخرى على نفس الشبكة المحلية:** `http://[Your_Computer_Local_IP]:3000`
        *   لاستخدام هذا، يجب أن يكون جهازك والكمبيوتر الذي يشغل "دوامي" على نفس الشبكة (Wi-Fi أو Ethernet).
        *   تحتاج إلى معرفة عنوان IP المحلي للكمبيوتر الذي يشغل "دوامي". يمكنك العثور عليه عادةً من إعدادات الشبكة (مثال: `192.168.1.10`).

## مشاكل وحلول شائعة

*   **المنفذ 3000 مستخدم (Port 3000 is already in use):**
    *   **السبب:** قد يكون هناك تطبيق آخر على جهازك يستخدم المنفذ 3000.
    *   **الحل:**
        1.  يمكنك إيقاف التطبيق الآخر.
        2.  أو، يمكنك تغيير المنفذ الذي يعمل عليه "دوامي". لتغيير المنفذ، عدل الأمر `npm start` في `package.json` أو في `start_web.bat` ليصبح مثلاً: `next start -p 3001` (لتشغيله على المنفذ 3001).
*   **جدار الحماية (Firewall) يمنع الوصول من الشبكة:**
    *   **السبب:** قد يقوم جدار الحماية على الكمبيوتر الذي يشغل "دوامي" بمنع الاتصالات الواردة على المنفذ 3000.
    *   **الحل:** ستحتاج إلى إضافة استثناء (exception) في إعدادات جدار الحماية للسماح بالاتصالات الواردة على المنفذ الذي يستخدمه "دوامي" (عادةً 3000).
*   **`npm install` يفشل:**
    *   **السبب:** قد تكون هناك مشكلة في اتصال الإنترنت، أو إصدار Node.js/npm غير متوافق.
    *   **الحل:** تأكد من اتصالك بالإنترنت، وتحقق من إصدار Node.js. حاول حذف مجلد `node_modules` وملف `package-lock.json` ثم أعد تشغيل `npm install`.

بهذه الخطوات، يجب أن يكون نظام "دوامي" جاهزاً للعمل على جهازك.
